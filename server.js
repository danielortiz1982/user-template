const express         = require('express')
const chalk           = require('chalk')
const path            = require('path')
const server          = express()
const PORT            = process.env.port || 4500
const UserRouter      = require('./router/users-router')
const ServerMessage   = `User Template API is running on localhost:${PORT}`
const db              = require('./utilities/db-connect')
const pub             = path.join(__dirname, '/public/')

server.use(express.static(pub))
server.use(express.json())

////////////////////////////////////////////////////////////////////////  API Router  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Users API Router
server.use(UserRouter)

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

server.get('/', (req, res)=>{
  res
    .status(200)
    .sendFile('index.html')
    .end()
})

server.get('/signup', (req, res)=>{
  res
    .status(200)
    .sendFile(`${pub}/sign.html`)
})

server.get('/users', (req, res)=>{
  res
    .status(200)
    .sendFile(`${pub}/users.html`)
})


server.listen(PORT, ()=>{
    return console.log(chalk.blue(ServerMessage))
})